<!DOCTYPE html>
<html>

<head>
	<style type="text/css">
		body {
			font-family: Arial, sans-serif;
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
			background-color: #f2f2f2;
			margin: 0;
		}

		.container {
			text-align: center;
			background-color: white;
			padding: 20px;
			border-radius: 8px;
			box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
			width: 300px;
		}

		textarea {
			width: 100%;
			height: 100px;
			margin-bottom: 10px;
			padding: 10px;
			border: 1px solid #ccc;
			border-radius: 4px;
		}

		button {
			padding: 10px 20px;
			font-size: 16px;
			color: white;
			background-color: red;
			border: none;
			border-radius: 4px;
			cursor: pointer;
		}

		button:hover {
			background-color: darkred;
		}

		#responseMessage {
			margin-top: 10px;
			font-weight: bold;
		}
	</style>
</head>

<body>
	<!-- Form for submitting reports -->
	<div class="container">
		<h1>Pesan Anonim</h1>
		<form id="reportForm">
			<textarea id="message" placeholder="Input your report here"></textarea>
			<button type="submit">Kirim Laporan</button>
		</form>
		<div id="responseMessage"></div>
	</div>

	<script type="text/javascript">
		(function () {
			document.getElementById('reportForm').addEventListener('submit', async (event) => {
				event.preventDefault(); // Prevent the default form submission

				const message = document.getElementById('message').value;

				try {
					const response = await fetch('/api/laporan', {
						method: 'POST',
						headers: {
							'Content-Type': 'application/json'
						},
						body: JSON.stringify({ message })
					});

					const data = await response.json();
					if (data.status === 'success') {
						alert(data.message);
					} else {
						alert(data.message);
					}
				} catch (error) {
					console.error('Error:', error);
					alert('Terjadi kesalahan saat mengirim laporan!');
				}
			});
		})();
	</script>
</body>

</html>